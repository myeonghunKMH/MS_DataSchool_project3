<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ê³¼ê±° ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜ | ITC</title>
  <link rel="stylesheet" href="/style.css" />
  <style>
    :root {
      color-scheme: dark;
      --accent: #ffd166;
      --stroke: #2b2b2b;
      --glow: 255, 255, 255;
    }

    html::-webkit-scrollbar,
    body::-webkit-scrollbar {
      display: none;
    }

    html,
    body {
      -ms-overflow-style: none;
      /* IE */
      scrollbar-width: none;
      /* Firefox */
    }

    body {
      margin: 0;
      color: #eaeaea;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background:
        radial-gradient(1200px 600px at 50% -10%, rgba(255, 255, 255, .12), transparent 60%),
        radial-gradient(900px 600px at 50% 120%, rgba(255, 255, 255, .08), transparent 60%),
        repeating-linear-gradient(to bottom, rgba(255, 255, 255, .03) 0 2px, rgba(0, 0, 0, 0) 2px 8px),
        linear-gradient(#151515, #0a0a0a);
      background-attachment: fixed;
    }

    /* ===== Header ===== */
    header {
      position: fixed;
      top: 12px;
      left: 12px;
      right: 12px;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .brand img {
      width: 120px;
      height: auto;
      filter: drop-shadow(0 10px 26px rgba(var(--glow), .22)) drop-shadow(0 0 20px rgba(var(--glow), .18));
    }

    .navbtn {
      display: inline-flex;
      align-items: center;
      height: 36px;
      padding: 0 14px;
      border-radius: 10px;
      background: rgba(255, 255, 255, .03);
      border: 1px solid var(--stroke);
      color: #f3f3f3;
      font-weight: 700;
      text-decoration: none;
      transition: .22s;
    }

    .navbtn:hover {
      border-color: rgba(var(--glow), .32);
      box-shadow: 0 0 12px rgba(var(--glow), .22);
      transform: translateY(-1px);
      color: #fff;
    }

    /* ===== Layout ===== */
    main {
      width: min(1100px, 92vw);
      margin: 130px auto 48px;
      display: flex;
      flex-direction: column;
      gap: 22px;
    }

    /* ===== Typewriter ì˜ì—­ ===== */
    #typewriter {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 10px;
      height: clamp(110px, 16vw, 140px);
      justify-content: center;
    }

    #line1 {
      font-size: clamp(24px, 3.6vw, 40px);
      font-weight: 900;
      letter-spacing: .3px;
      background: linear-gradient(95deg,
          rgba(255, 255, 255, 1) 0%,
          rgba(240, 240, 240, .85) 20%,
          rgba(255, 255, 255, .95) 50%,
          rgba(210, 210, 210, .65) 70%,
          rgba(255, 255, 255, 1) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 12px 36px rgba(var(--glow), .22)) drop-shadow(0 0 24px rgba(var(--glow), .20));
      white-space: nowrap;
    }

    #line2 {
      font-size: clamp(14px, 2.2vw, 19px);
      color: #cfcfcf;
      font-weight: 500;
      white-space: nowrap;
    }

    /* ===== Cards ===== */
    .grid {
      display: grid;
      gap: 50px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 240px));
      justify-content: center;
    }

    .card {
      max-width: 240px;
      position: relative;
      background: linear-gradient(180deg, rgba(255, 255, 255, .03), rgba(255, 255, 255, .01) 40%, rgba(255, 255, 255, 0));
      border: 1px solid var(--stroke);
      border-radius: 16px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, .30), inset 0 1px 0 rgba(255, 255, 255, .05);
      display: grid;
      overflow: hidden;
      grid-template-rows: auto 1fr auto;
      transition: transform .28s ease, box-shadow .28s ease, border-color .28s ease, filter .28s ease, opacity .28s ease;
    }

    .card::after {
      content: "";
      position: absolute;
      inset: auto 0 0 0;
      height: 46px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, .06));
      pointer-events: none;
    }

    .card.is-dim {
      opacity: .55;
      filter: grayscale(.08) brightness(.88);
    }

    .card.is-focus {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 16px 34px rgba(0, 0, 0, .45), 0 0 18px rgba(var(--glow), .18);
      border-color: rgba(var(--glow), .28);
      opacity: 1;
      filter: none;
    }

    .cards-wrap {
      position: relative;
      padding: 8px 60px;
    }

    .grid-nav {
      pointer-events: none;
    }

    .arrow {
      pointer-events: auto;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #fff;
      background: rgba(0, 0, 0, .55);
      color: #fff;
      box-shadow: 0 0 14px rgba(255, 255, 255, .25);
      transition: .2s;
      user-select: none;
      cursor: pointer;
    }

    .arrow:hover {
      background: rgba(0, 0, 0, .75);
      box-shadow: 0 0 18px rgba(255, 255, 255, .5);
      transform: translateY(-50%) scale(1.05);
    }

    .arrow:active {
      transform: translateY(-50%) scale(0.95);
    }

    .arrow.prev {
      left: -52px;
    }

    .arrow.next {
      right: -52px;
    }

    .arrow svg {
      width: 22px;
      height: 22px;
    }

    @media (max-width:640px) {
      .arrow.prev {
        left: -36px;
      }

      .arrow.next {
        right: -36px;
      }
    }

    .thumb {
      aspect-ratio: 10/9;
      background:
        linear-gradient(170deg, rgba(255, 255, 255, .14), rgba(255, 255, 255, 0) 60%),
        linear-gradient(to right, #303030, #121212);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 900;
      font-size: clamp(18px, 2.4vw, 26px);
      letter-spacing: .4px;
      text-transform: uppercase;
      text-shadow: 0 0 22px rgba(var(--glow), .38), 0 4px 18px rgba(var(--glow), .12);
      border-bottom: 1px solid var(--stroke);
    }

    .thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .body {
      padding: 14px;
    }

    .kicker {
      font-size: 12px;
      color: var(--accent);
      letter-spacing: .08em;
      text-transform: uppercase;
    }

    .card h3 {
      margin: 8px 0 6px;
      font-size: clamp(16px, 2.2vw, 20px);
      font-weight: 800;
    }

    .desc {
      color: #b0b0b0;
      font-size: 14px;
      line-height: 1.55;
      margin: 0;
    }

    .actions {
      display: flex;
      justify-content: flex-end;
      padding: 0 14px 14px;
      margin-top: auto;
    }

    .btn {
      background: rgba(255, 255, 255, .04);
      border: 1px solid var(--stroke);
      color: #f2f2f2;
      border-radius: 11px;
      height: 40px;
      padding: 0 14px;
      text-decoration: none;
      font-weight: 800;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      transition: .24s;
    }

    .btn:hover {
      border-color: rgba(var(--glow), .30);
      box-shadow: 0 0 12px rgba(var(--glow), .20), 0 10px 20px rgba(0, 0, 0, .35);
      color: #fff;
      transform: translateY(-1px);
    }

    /* ===== Footer ===== */
    footer {
      margin: 20px 0 36px;
      text-align: center;
      color: #9a9a9a;
      font-size: 12px;
      line-height: 1.4;
    }

    /* ===== Tutorial System (ì¶”ê°€) ===== */
    .tutorial-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, .85);
      z-index: 9998;
      opacity: 0;
      visibility: hidden;
      transition: opacity .3s, visibility .3s;
      pointer-events: none;
    }

    .tutorial-overlay.active {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }

    .tutorial-spotlight {
      position: fixed;
      border: 3px solid var(--accent);
      border-radius: 20px;
      z-index: 9999;
      display: none;
      box-shadow:
        0 0 0 9999px rgba(0, 0, 0, 0.85),
        0 0 40px rgba(255, 209, 102, 0.5),
        inset 0 0 20px rgba(255, 209, 102, 0.1);
    }

    .tutorial-mascot {
      position: fixed;
      z-index: 10001;
      display: none;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .tutorial-mascot.active {
      display: block;
    }

    .mascot-img {
      width: 140px;
      height: 140px;
      object-fit: contain;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-10px);
      }
    }

    /* ë§í’ì„  + ê¼¬ë¦¬ (index ë™ì¼ ê·œì¹™) */
    .tutorial-bubble {
      position: fixed;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(245, 245, 245, 0.95));
      color: #1a1a1a;
      padding: 24px 28px;
      border-radius: 20px;
      max-width: 420px;
      min-width: 320px;
      box-shadow:
        0 15px 40px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(255, 209, 102, 0.2);
      z-index: 10001;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s ease 0.2s;
      display: none;
    }

    .tutorial-bubble.active {
      display: block;
    }

    .tutorial-bubble.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* â˜… ê¼¬ë¦¬ */
    .tutorial-bubble::before {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background: linear-gradient(135deg, rgba(255, 255, 255, .98), rgba(245, 245, 245, .95));
      transform: rotate(45deg);
    }

    .tutorial-bubble.left::before {
      right: -10px;
      top: 50%;
      transform: translateY(-50%) rotate(45deg);
    }

    .tutorial-bubble.right::before {
      left: -10px;
      top: 50%;
      transform: translateY(-50%) rotate(45deg);
    }

    .tutorial-bubble.top::before {
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%) rotate(45deg);
    }

    .tutorial-bubble.bottom::before {
      top: -10px;
      left: 50%;
      transform: translateX(-50%) rotate(45deg);
    }

    .bubble-title {
      font-size: 18px;
      font-weight: 800;
      margin: 0 0 8px;
    }

    .bubble-text {
      font-size: 15px;
      line-height: 1.7;
      color: #333;
      margin: 0 0 20px;
    }

    .tutorial-controls {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }

    .tutorial-btn {
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      border: none;
      cursor: pointer;
    }

    .tutorial-btn.skip {
      background: rgba(0, 0, 0, .1);
      color: #666;
    }

    .tutorial-btn.next {
      background: linear-gradient(135deg, var(--accent), #ffb347);
      color: #1a1a1a;
    }

    .tutorial-btn.finish {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: white;
    }

    .tutorial-progress {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: none;
      gap: 8px;
      z-index: 10002;
    }

    .tutorial-progress.active {
      display: flex;
    }

    .progress-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, .3);
    }

    .progress-dot.active {
      background: var(--accent);
      transform: scale(1.2);
    }

    .help-button {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 1000;
      background: linear-gradient(135deg, rgba(255, 209, 102, 0.9), rgba(255, 193, 77, 0.8));
      border: 1px solid rgba(255, 209, 102, 0.6);
      border-radius: 50px;
      padding: 12px 20px;
      color: #1a1a1a;
      font-weight: 700;
      font-size: 14px;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 8px 25px rgba(255, 209, 102, 0.3), 0 0 20px rgba(255, 209, 102, 0.15);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      animation: gentle-pulse 3s ease-in-out infinite;
      cursor: pointer;
    }

    .help-button:hover {
      background: linear-gradient(135deg, rgba(255, 209, 102, 1), rgba(255, 193, 77, 0.95));
      box-shadow: 0 12px 35px rgba(255, 209, 102, 0.4), 0 0 30px rgba(255, 209, 102, 0.25);
      transform: translateY(-2px) scale(1.05);
      animation: none;
    }

    @keyframes gentle-pulse {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.02);
      }
    }
  </style>
</head>

<body>
  <header>
    <a class="brand" href="index.html"><img src="images/logo.png" alt="ITC ë¡œê³ " /></a>
    <a class="navbtn" href="index.html">â† Back</a>
  </header>

  <main>
    <!-- Hero / Typewriter -->
    <div id="typewriter">
      <div id="line1">ì‹œë®¬ë ˆì´ì…˜</div>
      <div id="line2">ê³¼ê±°ì˜ ì‹¤ì œ ì•”í˜¸í™”í ë°ì´í„°ë¡œ 3ê°€ì§€ í•µì‹¬ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì²´í—˜í•©ë‹ˆë‹¤. ì´í›„ ì‹¤ì œ íë¦„ì„ ë”°ë¼ê°€ë©° ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</div>
    </div>

    <!-- ì¹´ë“œ Grid -->
    <section class="cards-wrap">
      <div class="grid" id="cardGrid">
        <article class="card">
          <div class="thumb"><img src="images/scenario1.png" alt="í­ë½ì¥ ì‹œë‚˜ë¦¬ì˜¤" /></div>
          <div class="body">
            <div class="kicker">í­ë½ì¥</div>
            <h3>ê¸‰ë½ & íŒ¨ë‹‰ì…€ ëŒ€ì‘</h3>
            <p class="desc">ê°€ê²©ì´ ê¸‰ë½í•˜ë©° ë‰´ìŠ¤ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ëŠ” í­ë½ì¥ì—ì„œ ì†ì ˆ/ë¦¬ìŠ¤í¬ ê´€ë¦¬ì™€ ë‰´ìŠ¤ ëŒ€ì‘ì„ í•™ìŠµí•©ë‹ˆë‹¤.</p>
          </div>
          <div class="actions"><a class="btn" href="scenarios/scenario1.html">ì‹œì‘í•˜ê¸°</a></div>
        </article>

        <article class="card">
          <div class="thumb"><img src="images/scenario2.png" alt="ìƒìŠ¹ì¥ ì‹œë‚˜ë¦¬ì˜¤" /></div>
          <div class="body">
            <div class="kicker">ìƒìŠ¹ì¥</div>
            <h3>ê¸‰ë“± & FOMO ìƒí™©</h3>
            <p class="desc">ê¸ì •ì ì¸ ë‰´ìŠ¤ì™€ íˆ¬ì ì‹¬ë¦¬ë¡œ ê¸‰ë“±í•˜ëŠ” ì‹œì¥ì—ì„œ ìµì ˆ ì „ëµê³¼ ì¡°ì • ëŒ€ë¹„ ë°©ë²•ì„ ì—°ìŠµí•©ë‹ˆë‹¤.</p>
          </div>
          <div class="actions"><a class="btn" href="scenarios/scenario2.html">ì‹œì‘í•˜ê¸°</a></div>
        </article>

        <article class="card">
          <div class="thumb"><img src="images/scenario3.png" alt="ìœ ì§€ì¥ ì‹œë‚˜ë¦¬ì˜¤" /></div>
          <div class="body">
            <div class="kicker">ìœ ì§€ì¥</div>
            <h3>íš¡ë³´ & ê±°ë˜ëŸ‰ ê°ì†Œ</h3>
            <p class="desc">ê±°ë˜ëŸ‰ì´ ì¤„ê³  ê´€ë§ì„¸ê°€ ì´ì–´ì§€ëŠ” íš¡ë³´ì¥ì—ì„œ ë‹¨ê¸° ë§¤ë§¤ì™€ ë³€ë™ì„± ì˜ˆì¸¡ì„ í•™ìŠµí•©ë‹ˆë‹¤.</p>
          </div>
          <div class="actions"><a class="btn" href="scenarios/scenario3.html">ì‹œì‘í•˜ê¸°</a></div>
        </article>
      </div>

      <div class="grid-nav">
        <button class="arrow prev" aria-label="ì´ì „">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6z" />
          </svg>
        </button>
        <button class="arrow next" aria-label="ë‹¤ìŒ">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z" />
          </svg>
        </button>
      </div>
    </section>
  </main>
  <!-- Tutorial Elements ì¶”ê°€ -->
  <div class="tutorial-overlay" id="tutorialOverlay"></div>
  <div class="tutorial-spotlight" id="tutorialSpotlight"></div>
  <div class="tutorial-mascot" id="tutorialMascot">
    <img class="mascot-img" id="mascotImg" src="" alt="ë§ˆìŠ¤ì½”íŠ¸">
  </div>
  <div class="tutorial-bubble" id="tutorialBubble">
    <h3 class="bubble-title" id="bubbleTitle"></h3>
    <p class="bubble-text" id="bubbleText"></p>
    <div class="tutorial-controls">
      <button class="tutorial-btn skip" id="skipBtn">ê±´ë„ˆë›°ê¸°</button>
      <button class="tutorial-btn next" id="nextBtn">ë‹¤ìŒ</button>
    </div>
  </div>
  <div class="tutorial-progress" id="tutorialProgress"></div>
  <button class="help-button" id="helpButton">
    <img src="/images/coin_good1.png" alt="íŠœí† ë¦¬ì–¼ ë§ˆìŠ¤ì½”íŠ¸" style="width:24px;height:24px;border-radius:50%;">
    ì‹œë®¬ë ˆì´ì…˜ ê°€ì´ë“œ
  </button>
  <footer>
    ë³¸ ì„œë¹„ìŠ¤ëŠ” í•™ìŠµê³¼ ì—°ìŠµì„ ëª©ì ìœ¼ë¡œ ì œê³µë˜ëŠ” ëª¨ì˜íˆ¬ì ì‹œìŠ¤í…œì…ë‹ˆë‹¤.<br>
    ì œê³µë˜ëŠ” ë°ì´í„°ì™€ ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ëŠ” ì‹¤ì œ ì‹œì¥ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë©°, ì´ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ëª¨ë“  ì†ì‹¤ê³¼ ë¶ˆì´ìµì— ëŒ€í•´ì„œ ìš´ì˜ìëŠ” ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
    ë³¸ ì„œë¹„ìŠ¤ëŠ” íˆ¬ì ê¶Œìœ ê°€ ì•„ë‹ˆë©°, ì‹¤ì œ íˆ¬ìë¥¼ ê²°ì •í•  ë•ŒëŠ” ì´ìš©ì ë³¸ì¸ì˜ íŒë‹¨ê³¼ ì±…ì„ì— ë”°ë¼ì•¼ í•©ë‹ˆë‹¤.
  </footer>

  <script>
    class TutorialSystem {
      constructor() {
        this.currentStep = 0;
        this.isActive = false;
        this.elements = {
          overlay: document.getElementById('tutorialOverlay'),
          spotlight: document.getElementById('tutorialSpotlight'),
          mascot: document.getElementById('tutorialMascot'),
          mascotImg: document.getElementById('mascotImg'),
          bubble: document.getElementById('tutorialBubble'),
          bubbleTitle: document.getElementById('bubbleTitle'),
          bubbleText: document.getElementById('bubbleText'),
          nextBtn: document.getElementById('nextBtn'),
          skipBtn: document.getElementById('skipBtn'),
          progress: document.getElementById('tutorialProgress'),
          helpButton: document.getElementById('helpButton')
        };
        this.steps = [
          {
            target: null,
            mascot: 'coin_good1',
            title: 'ê³¼ê±° ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜',
            text: 'ê³¼ê±° ì‹¤ì œ ì•”í˜¸í™”í ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì„¸ ê°€ì§€ ì£¼ìš” ì‹œë‚˜ë¦¬ì˜¤ë¥¼\n ì§ì ‘ ì²´í—˜í•  ìˆ˜ ìˆì–´ìš”. ì‹œì¥ì˜ ê¸‰ë½, ê¸‰ë“±, íš¡ë³´ê¹Œì§€\në‹¤ì–‘í•œ ìƒí™©ì—ì„œ ì–´ë–»ê²Œ ëŒ€ì‘í• ì§€ ì—°ìŠµí•´ë´…ì‹œë‹¤!',
            position: 'center'
          },
          {
            target: '.card:nth-child(1)',
            mascot: 'coin_sad1',
            title: 'ğŸ“‰ í­ë½ì¥ ì‹œë‚˜ë¦¬ì˜¤',
            text: 'ê°€ê²©ì´ ê°‘ìê¸° ê¸‰ë½í•˜ê³  íˆ¬ììë“¤ì´ íŒ¨ë‹‰ì…€ì„ í•˜ëŠ” ìƒí™©!\nì´ë•Œ í•„ìš”í•œ ê±´ ì¹¨ì°©í•œ ì†ì ˆ ì „ëµê³¼ ë¦¬ìŠ¤í¬ ê´€ë¦¬ì˜ˆìš”.\në‰´ìŠ¤ê°€ íˆ¬ì ì‹¬ë¦¬ì— ì–´ë–¤ ì˜í–¥ì„ ì£¼ëŠ”ì§€ë„ í•¨ê»˜ ë°°ì›Œë´ìš”.',
            position: 'right'
          },
          {
            target: '.card:nth-child(2)',
            mascot: 'coin_good1',
            title: 'ğŸ’° ìƒìŠ¹ì¥ ì‹œë‚˜ë¦¬ì˜¤',
            text: 'í˜¸ì¬ ë‰´ìŠ¤ì™€ íˆ¬ì ì‹¬ë¦¬ê°€ ê²°í•©í•´ ê°€ê²©ì´ ê¸‰ë“±í•˜ëŠ” ìƒí™©!\nìµì ˆ íƒ€ì´ë°ì„ ì¡ëŠ” ë²•ê³¼ FOMO(ë†“ì¹ ê¹Œ ë‘ë ¤ì›€)ì—\n íœ˜ë‘˜ë¦¬ì§€ ì•ŠëŠ” ë°©ë²•ì„ í›ˆë ¨í•  ìˆ˜ ìˆì–´ìš”.',
            position: 'right'
          },
          {
            target: '.card:nth-child(3)',
            mascot: 'coin_soso1',
            title: 'ğŸ’¤ íš¡ë³´ì¥ ì‹œë‚˜ë¦¬ì˜¤',
            text: 'ê°€ê²©ì€ ì˜¤ë¥´ì§€ë„ ë‚´ë¦¬ì§€ë„ ì•Šê³  ê±°ë˜ëŸ‰ì€ ì ì  ì¤„ì–´ë“œëŠ”\nì§€ë£¨í•œ ì‹œì¥. ì´ëŸ´ ë• ë‹¨ê¸° ë§¤ë§¤ ì „ëµê³¼ ë³€ë™ì„± ì˜ˆì¸¡ ëŠ¥ë ¥ì´\n ì¤‘ìš”í•´ìš”. ì‹œì¥ì„ ê´€ë§í•˜ë©° ì ì ˆí•œ ê¸°íšŒë¥¼ ì¡ì•„ë³´ì„¸ìš”.',
            position: 'left'
          },
          {
            target: null,
            mascot: 'coin_good1',
            title: 'ì´ì œ ì‹œì‘í•´ë³¼ê¹Œìš”?',
            text: 'ì„¸ ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ ì¤‘ ì›í•˜ëŠ” ê±¸ ì„ íƒí•´ì„œ ì§ì ‘ ì²´í—˜í•´ ë³´ì„¸ìš”!\nì‹¤ì œ ì‹œì¥ê³¼ëŠ” ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆì§€ë§Œ, ì•ˆì „í•˜ê²Œ ì „ëµì„\n ì—°ìŠµí•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ê¸°íšŒì˜ˆìš”. ê·¸ëŸ¼ ì¦ê²ê²Œ í•™ìŠµí•´ë´…ì‹œë‹¤! âœ¨',
            position: 'center'
          }
        ];
        this.init();
      }
      init() {
        this.elements.helpButton.addEventListener('click', () => this.start());
        this.elements.nextBtn.addEventListener('click', () => this.nextStep());
        this.elements.skipBtn.addEventListener('click', () => this.end());
        this.createProgressDots();
      }
      createProgressDots() { this.elements.progress.innerHTML = ''; for (let i = 0; i < this.steps.length; i++) { const d = document.createElement('div'); d.className = 'progress-dot'; this.elements.progress.appendChild(d); } }
      start() { this.isActive = true; this.currentStep = 0; this.elements.overlay.classList.add('active'); this.elements.mascot.classList.add('active'); this.elements.progress.classList.add('active'); this.showStep(); }
      showStep() {
        const step = this.steps[this.currentStep];
        const dots = this.elements.progress.querySelectorAll('.progress-dot');
        dots.forEach((dot, i) => dot.classList.toggle('active', i === this.currentStep));

        this.elements.mascotImg.src = `/images/${step.mascot}.png`;
        this.elements.bubbleTitle.textContent = step.title;
        this.elements.bubbleText.innerHTML = step.text.replace(/\n/g, '<br>');

        // â˜… ë§ˆì§€ë§‰ ìŠ¤í…ì´ë©´ ë²„íŠ¼ì„ "ì‹œì‘í•˜ê¸°"ë¡œ ë³€ê²½
        const isLastStep = this.currentStep === this.steps.length - 1;
        if (isLastStep) {
          this.elements.nextBtn.textContent = 'ì‹œì‘í•˜ê¸°';
          this.elements.nextBtn.classList.add('finish');
          this.elements.skipBtn.style.display = 'none';
        } else {
          this.elements.nextBtn.textContent = 'ë‹¤ìŒ';
          this.elements.nextBtn.classList.remove('finish');
          this.elements.skipBtn.style.display = 'inline-block';
        }

        this.elements.bubble.classList.add('active');

        if (step.target) {
          const targetEl = document.querySelector(step.target);
          if (!targetEl) { this.showCenter(); return; }

          // â˜… ì¹´ë“œ ê°•ì¡°: ì„¤ëª… ëŒ€ìƒ ì¹´ë“œëŠ” is-focus, ë‹¤ë¥¸ ì¹´ë“œë“¤ì€ is-dim
          const cards = document.querySelectorAll('.card');
          cards.forEach(card => {
            if (card === targetEl) {
              card.classList.add('is-focus');
              card.classList.remove('is-dim');
            } else {
              card.classList.remove('is-focus');
              card.classList.add('is-dim');
            }
          });

          const rect = targetEl.getBoundingClientRect();
          const scrollY = window.scrollY || document.documentElement.scrollTop;
          const scrollX = window.scrollX || document.documentElement.scrollLeft;

          // spotlight + ì˜¤ë²„ë ˆì´
          this.elements.spotlight.style.display = 'block';
          this.elements.spotlight.style.top = (rect.top + scrollY - 15) + 'px';
          this.elements.spotlight.style.left = (rect.left + scrollX - 5) + 'px';
          this.elements.spotlight.style.width = (rect.width + 5) + 'px';
          this.elements.spotlight.style.height = (rect.height + 10) + 'px';
          this.elements.overlay.style.background = 'transparent';

          // ì¹˜ìˆ˜ ê³„ì‚°
          const bubble = this.elements.bubble;
          const mascot = this.elements.mascot;
          bubble.style.visibility = 'hidden'; bubble.style.display = 'block';
          mascot.style.visibility = 'hidden'; mascot.style.display = 'block';

          const bubbleRect = bubble.getBoundingClientRect();
          const mascotRect = this.elements.mascotImg.getBoundingClientRect();
          const bubbleW = bubbleRect.width || 420;
          const bubbleH = bubbleRect.height || 160;
          const mascotW = mascotRect.width || 140;
          const mascotH = mascotRect.height || 140;

          const vw = document.documentElement.clientWidth;
          const vh = document.documentElement.clientHeight;
          const GUTTER = 24;
          const MIN_PAD = 16;

          // ì¢Œ/ìš° ë°°ì¹˜ ë³´ì • + ê¼¬ë¦¬ ë°©í–¥ ì§€ì •
          let side = step.position;
          if (side === 'right' && rect.right + GUTTER + bubbleW > scrollX + vw - MIN_PAD) side = 'left';
          if (side === 'left' && rect.left - GUTTER - bubbleW < scrollX + MIN_PAD) side = 'right';

          // 1. ë§ˆìŠ¤ì½”íŠ¸ ìœ„ì¹˜ (ì¹´ë“œ ì˜†)
          const mascotTop = rect.top + scrollY + (rect.height / 2) - (mascotH / 2);
          let mascotLeft;
          if (side === 'right') mascotLeft = rect.right + scrollX + GUTTER;
          else if (side === 'left') mascotLeft = rect.left + scrollX - mascotW - GUTTER;
          else mascotLeft = rect.left + scrollX + rect.width / 2 - mascotW / 2;

          mascot.style.top = Math.min(Math.max(mascotTop, scrollY + MIN_PAD), scrollY + vh - mascotH - MIN_PAD) + 'px';
          mascot.style.left = Math.min(Math.max(mascotLeft, scrollX + MIN_PAD), scrollX + vw - mascotW - MIN_PAD) + 'px';
          mascot.style.visibility = '';

          // 2. ë²„ë¸” ìœ„ì¹˜ (ë§ˆìŠ¤ì½”íŠ¸ ì˜†ìœ¼ë¡œ ë¶™ì„)
          let bubbleTop = mascotTop + (mascotH / 2) - (bubbleH / 2);
          let bubbleLeft;
          if (side === 'right') bubbleLeft = mascotLeft + mascotW + 20;
          else if (side === 'left') bubbleLeft = mascotLeft - bubbleW - 20;
          else {
            bubbleTop = mascotTop + mascotH + 20;
            bubbleLeft = mascotLeft + (mascotW / 2) - (bubbleW / 2);
          }

          bubble.style.top = bubbleTop + 'px';
          bubble.style.left = bubbleLeft + 'px';
          bubble.style.visibility = '';

          // â˜… ë§í’ì„  ê¼¬ë¦¬ê°€ ë§ˆìŠ¤ì½”íŠ¸ë¥¼ í–¥í•˜ê²Œ
          bubble.className = `tutorial-bubble active ${(side === 'left' || side === 'right') ? side : 'top'}`;
          requestAnimationFrame(() => bubble.classList.add('show'));
          mascot.style.visibility = '';
        } else {
          this.elements.spotlight.style.display = 'none';   // â˜… spotlight ìˆ¨ê¹€
          this.elements.overlay.style.background = 'rgba(0,0,0,0.85)'; // â˜… ë°°ê²½ ë‹¤ì‹œ ê²€ê²Œ
          this.showCenter();
        }
      }

      // ê°€ìš´ë° ë°°ì¹˜(ì¸íŠ¸ë¡œ/ì•„ì›ƒíŠ¸ë¡œ)
      showCenter() {
        const bubble = this.elements.bubble;
        const mascot = this.elements.mascot;

        this.elements.spotlight.style.display = 'none';
        this.elements.overlay.style.background = 'rgba(0,0,0,0.85)';

        // ê°€ìš´ë° ë°°ì¹˜ + ê¼¬ë¦¬ëŠ” ì™¼ìª½ ê¸°ì¤€
        bubble.className = 'tutorial-bubble active left';

        const mascotSize = window.innerWidth < 640 ? 100 : 140;
        const gap = 30;

        bubble.style.display = 'block';
        const bubbleW = bubble.offsetWidth || 360;

        const totalW = mascotSize + bubbleW + gap;
        // ë²„ë¸”ì´ ì™¼ìª½, ë§ˆìŠ¤ì½”íŠ¸ê°€ ì˜¤ë¥¸ìª½
        const bubbleLeft = (window.innerWidth / 2) - (totalW / 2);
        const mascotLeft = bubbleLeft + bubbleW + gap;

        mascot.style.top = '50%';
        mascot.style.left = `${mascotLeft}px`;
        mascot.style.transform = 'translateY(-50%)';

        bubble.style.top = 'calc(50% - 30px)';
        bubble.style.left = `${bubbleLeft}px`;
        bubble.style.transform = 'translateY(-50%)';


        requestAnimationFrame(() => bubble.classList.add('show'));
      }

      nextStep() {
        this.elements.bubble.classList.remove('show');
        setTimeout(() => {
          if (this.currentStep < this.steps.length - 1) {
            this.currentStep++;

            // â˜… ë§ˆì§€ë§‰ ìŠ¤í… ë“¤ì–´ê°€ê¸° ì§ì „ì— ë°°ê²½ì„ ê²€ê²Œ ì´ˆê¸°í™”
            if (this.currentStep === this.steps.length - 1) {
              this.elements.overlay.style.background = 'rgba(0,0,0,0.85)';
              this.elements.spotlight.style.display = 'none';
            }

            this.showStep();
          } else {
            this.end();
          }
        }, 300);
      }
      end() {
        this.isActive = false;
        this.elements.overlay.classList.remove('active');
        this.elements.spotlight.style.display = 'none';
        this.elements.bubble.classList.remove('active', 'show');
        this.elements.mascot.classList.remove('active');
        this.elements.progress.classList.remove('active');
        this.elements.mascot.style.cssText = '';   // â˜… ë§ˆìŠ¤ì½”íŠ¸ ìœ„ì¹˜ ì´ˆê¸°í™”
      }
    }
    const tutorial = new TutorialSystem();
    // ê¸°ì¡´ ì¹´ë“œ focus ë¡œì§ (íŠœí† ë¦¬ì–¼ ì¤‘ì—” ë¹„í™œì„±)
    (function () {
      const grid = document.getElementById('cardGrid');
      const cards = Array.from(grid.querySelectorAll('.card'));
      const prevBtn = document.querySelector('.arrow.prev');
      const nextBtn = document.querySelector('.arrow.next');
      let idx = 1;

      function applyFocus() {
        if (tutorial.isActive) return;
        cards.forEach((c, i) => {
          c.classList.toggle('is-focus', i === idx);
          c.classList.toggle('is-dim', i !== idx);
        });
      }

      function move(dir) {
        if (tutorial.isActive) return;
        idx = (idx + dir + cards.length) % cards.length;
        applyFocus();
      }

      applyFocus();
      prevBtn.addEventListener('click', () => move(-1));
      nextBtn.addEventListener('click', () => move(1));

      window.addEventListener('keydown', (e) => {
        if (tutorial.isActive) return;
        if (e.key === 'ArrowLeft') move(-1);
        if (e.key === 'ArrowRight') move(1);
      });

      cards.forEach((card, i) => {
        card.addEventListener('click', (e) => {
          if (tutorial.isActive || e.target.closest('.btn')) return;
          idx = i; applyFocus();
        });
        card.addEventListener('mouseenter', () => {
          if (tutorial.isActive) return;
          idx = i; applyFocus();
        });
        card.addEventListener('touchstart', (e) => {
          if (tutorial.isActive || card.classList.contains('is-focus')) return;
          e.preventDefault();
          idx = i; applyFocus();
        }, { passive: false });
      });
    })();
  </script>
</body>

</html>